<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bharat Law Directory | Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Keeping your original styles */
        :root { --navy: #0f172a; --gold: #c5a059; --bg: #f8fafc; }
        body { background-color: var(--bg); font-family: 'Inter', sans-serif; }
        .hero { background: linear-gradient(rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.9)), url('https://images.unsplash.com/photo-1589829085413-56de8ae18c73?auto=format&fit=crop&w=1350&q=80'); background-size: cover; padding: 80px 0 100px; color: white; text-align: center; margin-bottom: 40px; }
        .adv-card { background: white; border-radius: 12px; border: 1px solid #e2e8f0; overflow: hidden; transition: 0.3s; height: 100%; display: flex; flex-direction: column; }
        .adv-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1); border-color: var(--gold); }
        .profile-pic { width: 100%; height: 220px; object-fit: cover; border-bottom: 3px solid var(--gold); background: #eee; }
        .card-body-custom { padding: 20px; flex-grow: 1; }
        .role-badge { font-size: 0.7rem; font-weight: 700; background: #f0f9ff; color: #0369a1; padding: 4px 10px; border-radius: 4px; text-transform: uppercase; margin-bottom: 8px; display: inline-block; }
        .info-row { display: flex; align-items: center; margin-top: 8px; font-size: 0.9rem; color: #64748b; }
        .info-row i { width: 24px; color: var(--gold); margin-right: 5px; }
        .card-actions { background: #f8fafc; border-top: 1px solid #e2e8f0; padding: 10px 20px; display: flex; justify-content: space-between; }
        .btn-action { text-decoration: none; font-weight: 600; font-size: 0.85rem; }
        .search-container { margin-top: -70px; margin-bottom: 30px; position: relative; z-index: 10; }
    </style>
</head>
<body>

<div class="hero">
    <div class="container">
        <h1 class="fw-bold">ADVOCATE MANAGEMENT SYSTEM</h1>
        <p class="opacity-75">Directory & Administration Panel</p>
    </div>
</div>

<div class="container">
    <div class="row justify-content-center search-container">
        <div class="col-lg-10">
            <div class="bg-white p-2 rounded-pill shadow d-flex align-items-center">
                <i class="fas fa-search ms-4 text-muted"></i>
                <input type="text" id="searchInput" class="form-control border-0 shadow-none mx-2 py-3" 
                       placeholder="Search by name, role or phone..." onkeyup="filterCards()">
                
                <a href="/addAdvocatePage" class="btn btn-dark rounded-pill px-4 py-2 fw-bold text-decoration-none">
                    <i class="fas fa-plus me-2"></i>ADD NEW
                </a>
            </div>
        </div>
    </div>

    <div class="row g-4 mb-5" id="memberGrid">
        <% advocates.forEach((adv) => { %>
            <div class="col-md-6 col-lg-4 col-xl-3 card-item">
                <div class="adv-card">
                    <img src="<%= adv.img %>" class="profile-pic" alt="<%= adv.name %>" onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
                    
                    <div class="card-body-custom">
                        <span class="role-badge"><%= adv.role %></span>
                        <h5 class="fw-bold text-dark mb-2 name-text"><%= adv.name %></h5>
                        
                        <div class="info-row">
                            <i class="fas fa-phone"></i> <span class="phone-text"><%= adv.phone %></span>
                        </div>
                        
                        <div class="info-row">
                            <i class="fas fa-map-marker-alt"></i> <%= adv.address %>
                        </div>
                    </div>
                    <div class="card-actions">
                        <a href="/editAdvocate/<%= adv._id %>" class="btn-action text-primary">
                            <i class="fas fa-edit me-1"></i> Edit
                        </a>
                        <a href="/deleteAdvocate?id=<%= adv._id %>" class="btn-action text-danger" onclick="return confirm('Are you sure?')">
                            <i class="fas fa-trash-alt me-1"></i> Delete
                        </a>
                    </div>
                </div>
            </div>
        <% }) %>
        
        <% if(advocates.length === 0) { %>
            <div class="text-center text-muted">No advocates found in database.</div>
        <% } %>
    </div>
</div>

<script>
    // Simple client-side search to filter the cards
    function filterCards() {
        const input = document.getElementById("searchInput").value.toLowerCase();
        const cards = document.getElementsByClassName("card-item");
        
        for (let i = 0; i < cards.length; i++) {
            let name = cards[i].querySelector(".name-text").innerText.toLowerCase();
            let phone = cards[i].querySelector(".phone-text").innerText.toLowerCase();
            
            if (name.includes(input) || phone.includes(input)) {
                cards[i].style.display = "";
            } else {
                cards[i].style.display = "none";
            }
        }
    }
</script>
</body>
</html>